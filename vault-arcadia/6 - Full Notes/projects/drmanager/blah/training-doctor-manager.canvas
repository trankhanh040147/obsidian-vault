{
	"nodes":[
		{"id":"ff89e1d61c613c2e","type":"text","text":"","x":-1787,"y":-4747,"width":250,"height":60},
		{"id":"49cd2a633c2f96f8","type":"text","text":"**TARGET 1: Token Manager**\n- set up source Gitlab\n- docker: create imae mongo  \n- connect mongo db\n- add golang-migrate/migrate\n- add github.com/swaggo/swag ...","x":-2840,"y":-5360,"width":480,"height":720},
		{"id":"2769662326dacd24","type":"text","text":"**Packages**\n- Viper - config\n- sqlc - database/sql\n- fiber - web framework\n- go-mongo - db driver\n- *zap* - logger\n- migrate - db migration\n- swag - swagger\n- docker \n- testify\n- validator","x":-2860,"y":-5740,"width":280,"height":340},
		{"id":"7327a64577e6b5bc","type":"text","text":"Token Rotation\n\n## Struct \ntype AuthToken struct {\n\tTokenId int\n\tUserId int\n\tExpireAt time\n\tIsUsed bool\n\tTokenType int\n}\n\n#Problems\n1. Khi user refresh token \n## Topics:\n- **Revoke Tokens (AT)**\n\t- https://auth0.com/docs/secure/tokens/revoke-tokens\n- **Revoke Refresh Token**\n\t- https://auth0.com/docs/secure/tokens/refresh-tokens/revoke-refresh-tokens\n- **Token Rotation**\n\t- https://auth0.com/docs/secure/tokens/refresh-tokens/refresh-token-rotation\n\t- You can also use refresh token rotation so that every time a client exchanges a refresh token to get a new access token, a new refresh token is also returned. Therefore, you no longer have a long-lived refresh token that, if compromised, could provide illegitimate access to resources. As refresh tokens are continually exchanged and invalidated, the threat is reduced.\n## Use Case:\n### 1. Login:\n- Tạo access token và refresh token, sau đó lưu các token vào db\n### 2. Refresh:\n- Nếu người dùng refresh bằng RefreshToken đã sử dụng --> Không cung cấp token mới, thông báo lỗi\n- Cập nhật trạng thái đã sử dung của refresh token đã dùng\n- Xóa access token cũ ra khỏi db (Tất cả access token)\n- Tạo access token và refresh token mới\n### 3. Protected middleware\n- Kiểm tra access token:\n\t- Có tồn tại trong db hay không (?: có thể không cần vì access token sẽ không bị revoke, chỉ khi nào bị revoke mới cần kiểm tra trong db)\n\t- Có còn hạn hay không \n\n","x":-2495,"y":-4360,"width":635,"height":1037},
		{"id":"c52c22db72b3b8e8","type":"text","text":"**Boilerplate**\n- https://github.com/truanguyenvan/go-clean-architecture-example","x":-3440,"y":-5360,"width":460,"height":360},
		{"id":"7727be063048c47a","type":"text","text":"**Documents**\nhttps://pkritiotis.io/clean-architecture-in-golang/\nhttps://github.com/gofiber/recipes/\nhttps://tutorialedge.net/golang/basic-rest-api-go-fiber/","x":-4080,"y":-5360,"width":560,"height":280},
		{"id":"122d70271ab3edaf","type":"text","text":"# TARGET 2: Manage Database Connection\n\n**API CRUD cho chức năng quản lý danh sách config cấu hình địa chỉ db, username, password****\nkeyword: golang service manage database config\nhttps://chazool.medium.com/managing-multiple-database-connections-in-golang-dc90dcf6f569","x":-2267,"y":-5360,"width":605,"height":580},
		{"id":"b7ba81dd1422ddf2","type":"text","text":"# TARGET 3: Manage Mongo Indexes\n## Model\ntype Index struct {  \n    ID         primitive.ObjectID     `bson:\"_id\"`  \n    Name       string                 `bson:\"name\"`  \n    Collection string                 `bson:\"collection\"`  \n    Type       string                 `bson:\"type\"`  \n    Key        map[string]interface{} `bson:\"key\"`  \n    CreatedAt  time.Time              `bson:\"created_at\"`  \n    UpdatedAt  time.Time              `bson:\"updated_at\"`  \n}\n\n### Documents\n- https://www.mongodb.com/docs/manual/core/indexes/create-index/specify-index-name/#std-label-specify-index-name\n\t+ Name: unique ","x":-1620,"y":-5360,"width":605,"height":580}
	],
	"edges":[]
}